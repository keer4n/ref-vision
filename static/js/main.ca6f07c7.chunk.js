(this["webpackJsonpref-vision"]=this["webpackJsonpref-vision"]||[]).push([[0],{196:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n(12),o=n(13),i=n(15),l=n(14),s=n(1),c=n.n(s),u=n(25),h=n.n(u);n(69),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p=n(9),d=n(26),f=n.n(d),m=n(34),y=(n(196),n(63)),v=n(62),b=Object(m.a)(Object(m.a)({},y),{},{tip:v.a}),k=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={graphJson:null,respOk:!0},r}return Object(r.a)(n,[{key:"graph",value:function(e){var t=e,n=b.select("svg"),a=+n.attr("width"),r=+n.attr("height"),o=b.forceSimulation().force("link",b.forceLink().id((function(e){return e.id}))).force("charge",b.forceManyBody().strength(-1e3)).force("center",b.forceCenter(a/2,r/2)),i=n.append("g").style("stroke","#aaa").selectAll("line").data(t.links).enter().append("line"),l=b.tip().attr("class","d3-tip").offset([-10,0]).html((function(e){return e.name?e.name:"N/A"})),s=n.append("g").attr("class","nodes").selectAll("circle").data(t.nodes).enter().append("circle").attr("r",20).call(b.drag().on("start",(function(e){b.event.active||o.alphaTarget(.3).restart();e.fx=e.x,e.fy=e.y})).on("drag",(function(e){e.fx=b.event.x,e.fy=b.event.y})).on("end",(function(e){b.event.active||o.alphaTarget(0);e.fx=null,e.fy=null}))).on("mouseover",l.show).on("mouseout",l.hide);n.call(l);var c=n.append("g").attr("class","labels").selectAll("text").data(t.nodes).enter().append("text").attr("class","label").text((function(e){return e.label?e.label:"N/A"}));o.nodes(t.nodes).on("tick",(function(){i.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),s.attr("r",20).style("fill","#d9d9d9").style("stroke","#969696").style("stroke-width","1px").attr("cx",(function(e){return e.x+6})).attr("cy",(function(e){return e.y-6})),c.attr("x",(function(e){return e.x-8})).attr("y",(function(e){return e.y})).style("font-size","12px").style("fill","#4393c3")})),o.force("link").links(t.links)}},{key:"componentDidMount",value:function(e){var t=this;fetch("https://cors-anywhere.herokuapp.com/https://ref-vision-api.herokuapp.com/api/g?doi="+this.props.doi).then((function(e){return 200!==e.status&&t.setState({respOk:!1}),e.json()})).then((function(e){t.setState({graphJson:e}),t.forceUpdate(),t.graph(t.state.graphJson)}))}},{key:"render",value:function(){return c.a.createElement(p.Content,{style:{textAlign:"center"}},this.state.respOk?c.a.createElement("svg",{width:"960",height:"600"}):c.a.createElement("h4",null,"No reference available."))}}]),n}(c.a.Component),g=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleClick=r.handleClick.bind(Object(o.a)(r)),r}return Object(r.a)(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClicked(this.props.doi)}},{key:"render",value:function(){return c.a.createElement("li",{onClick:this.handleClick},this.props.title,c.a.createElement("br",null),this.props.author)}}]),n}(c.a.Component),O=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={resultJson:null},r}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.query!==e.query&&fetch("https://cors-anywhere.herokuapp.com/https://ref-vision-api.herokuapp.com/api/s?query="+this.props.query).then((function(e){return e.json()})).then((function(e){return t.setState({resultJson:e})}))}},{key:"render",value:function(){var e=this;return this.props.searchMode&&!this.props.graphMode?null==this.state.resultJson?null:c.a.createElement(p.Content,{style:{padding:100,textAlign:"left"}},c.a.createElement("ol",null,this.state.resultJson.map((function(t){return c.a.createElement(g,{onClicked:e.props.onResultItemClick,key:t.doi,title:t.title,author:t.author,doi:t.doi})})))):this.props.graphMode?c.a.createElement(p.Content,{style:{padding:10,textAlign:"left"}},c.a.createElement(k,{doi:this.props.doi})):void 0}}]),n}(c.a.Component),j=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={query:""},r.handleSubmit=r.handleSubmit.bind(Object(o.a)(r)),r}return Object(r.a)(n,[{key:"handleSubmit",value:function(e){this.props.onQueryInput(this.state.query),e.preventDefault()}},{key:"render",value:function(){var e=this;return c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("input",{type:"text",value:this.state.query,onChange:function(t){e.setState({query:t.target.value})}}))}}]),n}(c.a.Component),x=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={query:"",gotQuery:!1,searchMode:!0,graphMode:!1,gotResults:!1,gotGraphJson:!1,resultJson:null,graphJson:null},r.handleSearchBarSubmit=r.handleSearchBarSubmit.bind(Object(o.a)(r)),r.handleResultItemClick=r.handleResultItemClick.bind(Object(o.a)(r)),r}return Object(r.a)(n,[{key:"handleSearchBarSubmit",value:function(e){this.setState({query:e,graphMode:!1})}},{key:"handleResultItemClick",value:function(e){this.setState({doi:e,graphMode:!0})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(j,{onQueryInput:this.handleSearchBarSubmit}),c.a.createElement(p.Frame,{style:{margin:"20px"}},c.a.createElement(O,{query:this.state.query,doi:this.state.doi,searchMode:this.state.searchMode,graphMode:this.state.graphMode,onResultItemClick:this.handleResultItemClick})))}}]),n}(c.a.Component);h.a.render(c.a.createElement(p.ThemeProvider,{theme:Object(p.createTheme)()},c.a.createElement(p.Arwes,null,c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(f.a,{node:"h1"},"REF-VISION"),c.a.createElement(x,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,n){e.exports=n(198)},69:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.ca6f07c7.chunk.js.map